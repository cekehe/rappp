<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <title>rappp package</title>
    <meta charset="utf-8" />
    <meta name="author" content="August Jernbom Falk, Cecilia Hellström, Sofia Bergström" />
    <meta name="date" content="2019-06-20" />
    <link href="libs/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link href="libs/remark-css-0.0.1/default-fonts.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# rappp package
## Convenient functions for<br />Autoimmunity Profiling and Protein Profiling<br />data analysis using R
### August Jernbom Falk, Cecilia Hellström, Sofia Bergström
### KTH, SciLifeLab
### 2019-06-20

---



```r
library(rappp); library(tidyverse); library(ggforce); library(magrittr)
```


---
# Affinity proteomics
## Protein profiling and Autoimmunity profiling
.center[![SciLifeLab](images/scilifelab-in-stockholm.jpg)]


???
background-image: url(https://ki.se/sites/default/files/migrate/styles/adaptive/public/scilifelab-in-stockholm.jpg)
background-position: right
background-size: contain

# Affinity proteomics
## Protein profiling and Autoimmunity profiling
???
We are from SciLifeLab
blah blah
loggor
 
---

# Method introduction &amp; reason for package
.center[![Suspension Bead Array](images/AP_SBA_overview_AJF_cropped.png)]

---

# Project workflow

- New Package template was created locally on Cecilia's computer.
- New repo was created on Cecilia's GitHub.
- The local and GitHub repos were connected.
--

- Forking and cloning by August and Sofia.
- August and Sofia made collaborators, to allow them to accept pull requests themselves.
--

- Incorprate separate funcitons for different parts of our data analysis workflow.
  - Sofia: Bead count visualization
  - Cecilia: Data transformation
  - August: Data visualization

---

# Bead count plot


```r
bead_count_base(df_bead_count)
```

--

```r
bead_count_ggplot(df_bead_count)
```
--

```r
#&gt; system.time(bead_count_base(df_bead_count))
#   user  system elapsed 
# 16.030   0.140  16.255 
#
#
#&gt; system.time(bead_count_ggplot(df_bead_count))
#   user  system elapsed 
#  7.012   0.171   7.233
```


???
---
# Bead count plot with ggplot
.center[![With ggplot](images/bead_count_ggplot.png)]



---

# Data transformation

Basic data transformation workflow:

&lt;img src="images/Data_transformation_workflow1.png" style="width: 80%" /&gt;
--


Currently done differently by different people and often with copy-paste.


---
# Data transformation

&lt;img src="images/Data_transformation_workflow2.png" style="width: 80%" /&gt;

---
# Data transformation

&lt;img src="images/Data_transformation_workflow3.png" style="width: 80%" /&gt;
--


```r
normalized &lt;- ap_norm(MFI_data)
```
--
&lt;img src="images/Data_transformation_output.png" style="width: 60%" /&gt;


```r
# &gt; system.time(ap_norm(MFI_data))
#   user  system elapsed 
#   0.11    0.00    0.11 
```
   
---

# Data visualization


```r
beeswarm_ggplot(
  data = SBA_data,
  filename = "filename",
  sample_info = sampleinfo,
  bead_info = beadinfo,
  grouping_var = "diagnosis",
  sample_name_var = "sample_name",
  xlab = c("BIP/MAN", "DEL", "DEP", "SCA", "SCZ", "NON-PSY")
)
```
---
# Data visualization

.center[![Example output](images/beeswarm_ggplot_SHIP_censored.png)]

---

# Conclusions and future work

- Established our first package!

- Collaborated using github

- Started to use tidyverse functions&lt;br/&gt;

&lt;br/&gt;
&lt;br/&gt;


  

This will enable us to:
- More standardized workflow within group

- Continue building with our new knowledge!

---

```r
sessionInfo()
```

```
## R version 3.6.0 (2019-04-26)
## Platform: x86_64-apple-darwin15.6.0 (64-bit)
## Running under: macOS Sierra 10.12.6
## 
## Matrix products: default
## BLAS:   /Library/Frameworks/R.framework/Versions/3.6/Resources/lib/libRblas.0.dylib
## LAPACK: /Library/Frameworks/R.framework/Versions/3.6/Resources/lib/libRlapack.dylib
## 
## locale:
## [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## loaded via a namespace (and not attached):
##  [1] compiler_3.6.0  magrittr_1.5    tools_3.6.0     htmltools_0.3.6
##  [5] xaringan_0.10   yaml_2.2.0      Rcpp_1.0.1      stringi_1.4.3  
##  [9] rmarkdown_1.13  knitr_1.23      stringr_1.4.0   xfun_0.7       
## [13] digest_0.6.19   evaluate_0.14
```
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();</script>

<script>
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
